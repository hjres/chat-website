<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>الشات</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f0f0;
      margin: 0;
      padding: 0;
    }
    .container {
      width: 90%;
      margin: auto;
      padding-top: 20px;
    }
    #messages {
      background: #fff;
      border: 1px solid #ccc;
      padding: 10px;
      height: 300px;
      overflow-y: scroll;
      margin-bottom: 10px;
    }
    #messageInput {
      width: 80%;
      padding: 10px;
    }
    #sendBtn {
      padding: 10px;
    }
    #admin-panel {
      display: none;
      background: #dff0d8;
      padding: 10px;
      margin-bottom: 20px;
      border: 1px solid #3c763d;
    }
    #settings {
      margin-top: 20px;
    }
    .hidden {
      display: none;
    }
  </style>
</head>

<body>

<div class="container">
  <!-- لوحة تحكم الأدمن -->
  <div id="admin-panel">
    <h2>لوحة تحكم المدير</h2>
    <button onclick="manageUsers()">إدارة الأعضاء</button>
    <button onclick="manageMessages()">إدارة الرسائل</button>
    <button onclick="viewReports()">عرض البلاغات</button>
  </div>

  <!-- صندوق الرسائل -->
  <div id="messages"></div>

  <!-- كتابة رسالة -->
  <input type="text" id="messageInput" placeholder="اكتب رسالتك هنا">
  <button id="sendBtn" onclick="sendMessage()">إرسال</button>

  <!-- إعدادات المستخدم -->
  <div id="settings">
    <h3>الإعدادات الشخصية</h3>
    <button onclick="logout()">تسجيل الخروج</button>
  </div>
</div>

<script>
  // دالة لإرسال الرسالة
  function sendMessage() {
    var messageBox = document.getElementById('messages');
    var input = document.getElementById('messageInput');
    if (input.value.trim() !== '') {
      var message = document.createElement('div');
      message.textContent = localStorage.getItem('currentUser') + ": " + input.value;
      messageBox.appendChild(message);
      input.value = '';
      messageBox.scrollTop = messageBox.scrollHeight;
    }
  }

  // دالة لتسجيل الخروج
  function logout() {
    localStorage.removeItem('currentUser');
    window.location.href = "login.html"; // يرجع لصفحة تسجيل الدخول
  }

  // دالة لإدارة الأعضاء
  function manageUsers() {
    alert('هذه صفحة إدارة الأعضاء (قيد التطوير)');
  }

  // دالة لإدارة الرسائل
  function manageMessages() {
    alert('هذه صفحة إدارة الرسائل (قيد التطوير)');
  }

  // دالة لعرض البلاغات
  function viewReports() {
    alert('عرض البلاغات (قيد التطوير)');
  }

  // التحقق عند تحميل الصفحة
  window.onload = function() {
    var username = localStorage.getItem('currentUser');
    if (!username) {
      window.location.href = "login.html";
    } else if (username === "admin") {
      document.getElementById('admin-panel').style.display = 'block';
    }
  };
</script>

</body>
</html>
<!-- نافذة البروفايل -->
<div id="profilePopup" style="display:none; position:fixed; top:20%; left:50%; transform:translateX(-50%); background:white; padding:20px; border-radius:10px; box-shadow:0 0 10px gray;">
  <img id="profileImage" src="" style="width:80px; height:80px; border-radius:50%;"><br><br>
  <strong id="profileName"></strong><br><br>
  <button onclick="startPrivateChat()">مراسلة خاصة</button>
  <button onclick="reportUser()">إبلاغ عن المستخدم</button><br><br>
  <button onclick="closeProfile()">إغلاق</button>
</div>
<input type="file" id="uploadImage" accept="image/*" onchange="previewImage()" style="display:none;">
<label for="uploadImage" style="cursor:pointer;">📷 رفع صورة</label>
<div id="uploadedImagePreview"></div>
